<!-- Slim Sidebar Menu (Font Awesome Icons + Melhorias Visuais Completas) -->
<!-- Slim Sidebar Menu (Font Awesome Icons + Melhorias Visuais Completas) -->
<aside class="main-sidebar sidebar-light elevation-4 slim-menu auto-hide-sidebar">
    <div class="sidebar">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            <!-- ADMINISTRATIVO -->
            <li class="nav-item has-treeview">
                <a href="#" class="nav-link">
                    <i class="fas fa-folder nav-icon"></i>
                    <p class="nav-label">Administrativo</p>
                </a>
                <ul class="nav nav-treeview pl-4">
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Cadastros <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/parceiro" class="nav-link"><i class="fas fa-handshake nav-icon"></i><p>Parceiros</p></a></li>
                            <li class="nav-item"><a href="/escolas" class="nav-link"><i class="fas fa-school nav-icon"></i><p>Escolas</p></a></li>
                            <li class="nav-item"><a href="/alunos" class="nav-link"><i class="fas fa-user-graduate nav-icon"></i><p>Alunos</p></a></li>
                            <li class="nav-item"><a href="/centrocusto" class="nav-link"><i class="fas fa-project-diagram nav-icon"></i><p>Centro de Custos</p></a></li>
                            <li class="nav-item"><a href="/planoconta" class="nav-link"><i class="fas fa-tags nav-icon"></i><p>Categorias de Conta</p></a></li>
                        </ul>
                    </li>
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Processos <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/gestaobolsas" class="nav-link"><i class="fas fa-award nav-icon"></i><p>Bolsas de Estudo</p></a></li>
                            <li class="nav-item"><a href="/assinatura" class="nav-link"><i class="fas fa-file-signature nav-icon"></i><p>Assinaturas</p></a></li>
                            <li class="nav-item"><a href="/gestaocontratos" class="nav-link"><i class="fas fa-file-contract nav-icon"></i><p>Contratos</p></a></li>
                        </ul>
                    </li>
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Relatórios <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/relatoriocontratos" class="nav-link"><i class="fas fa-clipboard-list nav-icon"></i><p>Relação de Contratos</p></a></li>
                        </ul>
                    </li>
                </ul>
            </li>

            <!-- FINANCEIRO -->
            <li class="nav-item has-treeview">
                <a href="#" class="nav-link">
                    <i class="fas fa-dollar-sign nav-icon"></i>
                    <p class="nav-label">Financeiro</p>
                </a>
                <ul class="nav nav-treeview pl-4">
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Cadastros <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/banco" class="nav-link"><i class="fas fa-university nav-icon"></i><p>Bancos</p></a></li>
                            <li class="nav-item"><a href="/transacao" class="nav-link"><i class="fas fa-exchange-alt nav-icon"></i><p>Transações</p></a></li>
                            <li class="nav-item"><a href="/parceiro" class="nav-link"><i class="fas fa-handshake nav-icon"></i><p>Parceiros</p></a></li>
                        </ul>
                    </li>
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Processos <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/parcela" class="nav-link"><i class="fas fa-th-list nav-icon"></i><p>Parcelas</p></a></li>
                            <li class="nav-item"><a href="/movimentocaixa" class="nav-link"><i class="fas fa-cash-register nav-icon"></i><p>Movimento do Caixa</p></a></li>
                            <li class="nav-item"><a href="/movimentocaixa/importarextrato" class="nav-link"><i class="fas fa-file-import nav-icon"></i><p>Importar Extrato</p></a></li>
                        </ul>
                    </li>
                    <li class="nav-item has-treeview">
                        <a href="#" class="nav-link">
                            <p>Relatórios <i class="fas fa-angle-left right"></i></p>
                        </a>
                        <ul class="nav nav-treeview pl-4">
                            <li class="nav-item"><a href="/parcela/visaogeralcarteira" class="nav-link"><i class="fas fa-wallet nav-icon"></i><p>Visão Geral da Carteira</p></a></li>
                            <li class="nav-item"><a href="/fluxocaixa" class="nav-link"><i class="fas fa-chart-line nav-icon"></i><p>Fluxo de Caixa</p></a></li>
                            <li class="nav-item"><a href="/movimentocaixa/extrato" class="nav-link"><i class="fas fa-receipt nav-icon"></i><p>Extrato</p></a></li>
                        </ul>
                    </li>
                </ul>
            </li>

            <!-- CONFIGURAÇÕES -->
            <li class="nav-item">
                <a href="/usuarios" class="nav-link">
                    <i class="fas fa-users-cog nav-icon"></i>
                    <p class="nav-label">Cadastro de Usuários</p>
                </a>
            </li>

            <!-- INTEGRAÇÃO -->
            <li class="nav-item has-treeview">
                <a href="#" class="nav-link">
                    <i class="fas fa-plug nav-icon"></i>
                    <p class="nav-label">Integração</p>
                </a>
                <ul class="nav nav-treeview pl-4">
                    <li class="nav-item"><a href="/parametrosguru" class="nav-link"><i class="fas fa-plug nav-icon"></i><p>Guru</p></a></li>
                    <li class="nav-item"><a href="/conta" class="nav-link"><i class="fas fa-sitemap nav-icon"></i><p>Domínio</p></a></li>
                    <li class="nav-item"><a href="/docsign" class="nav-link"><i class="fas fa-file-signature nav-icon"></i><p>DocSign</p></a></li>
                    <li class="nav-item"><a href="/parametrosguru/index?idplataforma=3" class="nav-link"><i class="fas fa-credit-card nav-icon"></i><p>Pagar.me</p></a></li>
                    <li class="nav-item"><a href="/parametrosguru/index?idplataforma=2" class="nav-link"><i class="fas fa-credit-card nav-icon"></i><p>ASAAS</p></a></li>
                </ul>
            </li>
        </ul>
    </div>
</aside>


<style>
    :root {
        --sidebar-expanded-width: var(--sidebar-expanded-width);
    }

    .slim-menu {
        width: 60px;
        background-color: #f8f9fa;
        transition: width 0.3s ease-in-out;
        overflow-x: hidden;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1030;
    }

        .slim-menu:hover {
            width: 300px;
            background-color: #ffffff;
        }

        .slim-menu .nav-label {
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            color: #333;
            font-weight: 500;
        }

        .slim-menu:hover .nav-label {
            opacity: 1;
            margin-left: 10px;
        }

        .slim-menu .icon,
        .slim-menu .nav-icon {
            width: 20px;
            margin-right: 0;
            filter: brightness(0.5);
        }

        .slim-menu .nav-link {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            transition: background-color 0.2s;
        }

            .slim-menu .nav-link.active,
            .slim-menu .nav-link:hover {
                background-color: #e0e0e0;
                font-weight: bold;
                border-radius: 4px;
            }

        .slim-menu .nav-treeview {
            padding-left: 16px;
            border-left: 1px solid #dee2e6;
            margin-left: 6px;
            transition: all 0.2s ease-in-out;
        }

        .slim-menu .has-treeview > .nav-link .right {
            transition: transform 0.3s ease;
        }

        .slim-menu .has-treeview.menu-open > .nav-link .right {
            transform: rotate(-90deg);
        }

        .slim-menu .nav-link {
            display: flex;
            align-items: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .slim-menu:hover .nav-link p,
        .slim-menu .menu-open .nav-link p {
            white-space: normal;
            overflow: visible;
            text-overflow: unset;
        }

        .slim-menu .nav-icon {
            flex-shrink: 0;
        }

        .slim-menu .nav-link p {
            display: block;
            max-width: 100%;
            width: 100%;
            flex: 1 1 auto;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding-right: 10px;
            margin: 0;
        }

        .slim-menu .nav-link {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 100%;
        }

        .slim-menu .nav-icon {
            flex-shrink: 0;
            margin-right: 10px;
        }

        .slim-menu .nav-link p {
            margin: 0;
            padding-right: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex: 1 1 auto;
            min-width: 0;
        }

        .slim-menu .nav-link {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 100%;
            flex-wrap: nowrap;
            overflow: visible;
        }

            .slim-menu .nav-link p {
                flex: 1 1 auto;
                min-width: 0;
                white-space: normal;
                overflow: visible;
                text-overflow: unset;
                margin: 0;
                padding-right: 10px;
            }

        .slim-menu:hover .nav-label {
            opacity: 1;
            margin-left: 10px;
            white-space: normal !important;
        }

    .sidebar,
    .slim-menu,
    .nav-sidebar,
    .nav-sidebar > .nav-item,
    .nav-sidebar .nav-treeview,
    .nav-sidebar .nav-link {
        width: 100%;
        max-width: 100%;
        overflow: visible !important;
        white-space: nowrap;
    }

        .nav-sidebar .nav-treeview .nav-link p {
            display: block;
            width: 100%;
            white-space: normal;
            overflow: visible;
            text-overflow: unset;
            padding-right: 10px;
        }

    .slim-menu {
        width: 60px;
        background-color: #f8f9fa;
        transition: width 0.3s ease-in-out;
        overflow-x: hidden;
    }

        .slim-menu:hover {
            width: 280px;
            background-color: #ffffff;
        }

        .slim-menu .nav-label {
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
        }

        .slim-menu:hover .nav-label {
            opacity: 1;
            margin-left: 10px;
        }

</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const currentUrl = window.location.pathname;
        const links = document.querySelectorAll(".nav-sidebar a.nav-link");

        links.forEach(link => {
            const href = link.getAttribute("href");
            if (href && currentUrl.startsWith(href)) {
                link.classList.add("active");
                // Removido: não aplicamos menu-open por padrão
            }
        });
    });
</script>
